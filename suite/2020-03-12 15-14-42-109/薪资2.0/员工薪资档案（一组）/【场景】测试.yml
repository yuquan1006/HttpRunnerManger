-   config:
        name: "\u3010\u573A\u666F\u3011\u6D4B\u8BD5"
        request:
            base_url: https://www.ihr360.com
        variables:
        -   b_accountName: '18655660011'
        -   b_password: '111111'
        -   staffName: "\u85AA\u8D44\u5165\u804C${getCurDateStr()}"
        -   idCardNo: '13000010001'
        -   mobileNo: '13000010001'
        -   enrollInDate: ${get_current_date()}
        -   birthday: '2020-01-01'
        -   staffName_zz: "\u85AA\u8D440002"
-   test:
        extract:
        -   message: content.message
        -   redirectUrl: content.redirectUrl
        name: "\u5355\u63A5\u53E3-\u3010\u767B\u5F55\u3011-B\u7AEF\u767B\u5F55"
        request:
            headers:
                content-type: application/json; charset=utf-8
            json:
                accountName: $b_accountName
                loginType: PASSWORD
                mobilePrefix: CHINA
                password: $b_password
                target: ''
                verifyCode: null
            method: POST
            url: https://account.ihr360.com/ac/login
        validate:
        -   check: status_code
            comparator: equals
            expected: 200
        -   check: $message
            comparator: equals
            expected: "\u8BA4\u8BC1\u767B\u5F55\u6210\u529F"
-   test:
        extract:
        -   cookie_token: req_headers.cookie
        name: "\u5355\u63A5\u53E3-\u3010\u767B\u5F55\u3011-B\u7AEF\u767B\u5F55\u6388\
            \u6743"
        request:
            method: GET
            url: $redirectUrl
        validate:
        -   check: status_code
            comparator: equals
            expected: 200
-   test:
        extract:
        -   result: content.result
        -   staffId: content.data.list.0.id
        -   idCardNo: content.data.list.0.idCardNo
        -   mobileNo: content.data.list.0.mobileNo
        -   staffName: content.data.list.0.staffName
        name: "\u5355\u63A5\u53E3-\u3010\u82B1\u540D\u518C\u3011\u67E5\u8BE2\u4E00\
            \u4E2A\u5458\u5DE5"
        request:
            headers:
                Content-Type: application/json;charset=UTF-8
                X-XSRF-TOKEN: ${getHeadersToken($cookie_token)}
            json:
                fields:
                - staffName
                - staffStatus
                - idCardType
                - positionId
                - positionName
                - departmentId
                - departmentName
                - staffNo
                - idCardNo
                - mobileNo
                - isSyncRosterAccount
                flexSearchItems:
                -   fieldType: EQUAL
                    searchKey: staffStatus
                    searchParam: IN_SERVICE
                -   fieldType: LIKE
                    searchKey: staffName
                    searchParam: $staffName_zz
                -   fieldType: LIKE
                    searchKey: mobileNo
                    searchParam: ''
                -   fieldType: IN
                    searchKey: departmentId
                    searchParam: '7'
                page: 1
                pageSize: '20'
            method: POST
            url: /web/gateway/roster/aggregate/v1/staffs/search
        validate:
        -   check: status_code
            comparator: equals
            expected: 200
        -   check: $result
            comparator: equals
            expected: true
-   test:
        extract:
        -   result: content.result
        -   birthday: content.data.birthday
        -   enrollInDate: content.data.enrollInDate
        -   probationEndDate: content.data.probationEndDate
        -   createdDate: content.data.createdDate
        -   companyId: content.data.companyId
        name: "\u5355\u63A5\u53E3-\u3010\u82B1\u540D\u518C\u3011\u83B7\u53D6\u8BE5\
            \u5458\u5DE5\u7684\u8BE6\u7EC6\u4FE1\u606F"
        request:
            headers:
                Content-Type: application/json;charset=UTF-8
                X-XSRF-TOKEN: ${getHeadersToken($cookie_token)}
            method: GET
            url: /web/gateway/roster/aggregate/v1/staffs/$staffId
        validate:
        -   check: status_code
            comparator: equals
            expected: 200
        -   check: $result
            comparator: equals
            expected: true
-   test:
        extract:
        -   result: content.result
        -   data: content.data
        name: "\u5355\u63A5\u53E3-\u3010\u82B1\u540D\u518C\u3011\u7ED9\u5458\u5DE5\
            \u8BBE\u7F6E\u8F6C\u6B63\u65E5\u671F"
        request:
            headers:
                Content-Type: application/json;charset=UTF-8
                X-XSRF-TOKEN: ${getHeadersToken($cookie_token)}
            json:
                birthday: $birthday
                clickCreateStaffNo: false
                companyId: $companyId
                contractBeginDate: ''
                contractEndDate: ''
                contractType: LABOR_CONTRACT
                createdDate: $createdDate
                departmentId: 7
                enrollInDate: $enrollInDate
                formFlexAttributes:
                    age:
                        fieldName: age
                        isMain: true
                        type: CALCULATE
                    birthday:
                        fieldName: birthday
                        isMain: true
                        type: DATE
                        value: $birthday
                    bloodType:
                        fieldName: bloodType
                        isMain: true
                        type: CODE_TYPE
                    childName:
                        fieldName: childName
                        isMain: true
                        type: STRING
                    companySiteId:
                        fieldName: companySiteId
                        isMain: true
                        type: STRING
                    contractBeginDate:
                        fieldName: contractBeginDate
                        isMain: true
                        type: DATE
                        value: ''
                    contractEndDate:
                        fieldName: contractEndDate
                        isMain: true
                        type: DATE
                        value: ''
                    contractType:
                        fieldName: contractType
                        isMain: true
                        type: CODE_TYPE
                        value: LABOR_CONTRACT
                    corporationId:
                        fieldName: corporationId
                        isMain: true
                        type: STRING
                    country:
                        fieldName: country
                        isMain: true
                        type: CODE_TYPE
                    departmentId:
                        fieldName: departmentId
                        isMain: true
                        type: STRING
                        value: 7
                    email:
                        fieldName: email
                        isMain: true
                        type: STRING
                    emergencyContactMobile:
                        fieldName: emergencyContactMobile
                        isMain: true
                        type: STRING
                    emergencyContactName:
                        fieldName: emergencyContactName
                        isMain: true
                        type: STRING
                    enrollInDate:
                        fieldName: enrollInDate
                        isMain: true
                        type: DATE
                        value: $enrollInDate
                    firstName:
                        fieldName: firstName
                        isMain: true
                        type: STRING
                    highestEducation:
                        fieldName: highestEducation
                        isMain: true
                        type: CODE_TYPE
                    hukouAddress:
                        fieldName: hukouAddress
                        isMain: true
                        type: STRING
                    hukouType:
                        fieldName: hukouType
                        isMain: true
                        type: CODE_TYPE
                    idCardImageId1:
                        fieldName: idCardImageId1
                        isMain: true
                        type: IMG
                    idCardImageId2:
                        fieldName: idCardImageId2
                        isMain: true
                        type: IMG
                    idCardNo:
                        fieldName: idCardNo
                        isMain: true
                        type: STRING
                        value: $idCardNo
                    idCardType:
                        fieldName: idCardType
                        isMain: true
                        type: CODE_TYPE
                        value: CHINA_PASSPORT
                    initialWorkYears:
                        fieldName: initialWorkYears
                        isMain: true
                        type: DOUBLE
                        value: ''
                    isUseLunar:
                        fieldName: isUseLunar
                        isMain: true
                        type: BOOLEAN
                        value: false
                    jobTitleId:
                        fieldName: jobTitleId
                        isMain: true
                        type: STRING
                    lastName:
                        fieldName: lastName
                        isMain: true
                        type: STRING
                    legalName:
                        fieldName: legalName
                        isMain: true
                        type: STRING
                    livingAddress:
                        fieldName: livingAddress
                        isMain: true
                        type: STRING
                    marryStatus:
                        fieldName: marryStatus
                        isMain: true
                        type: CODE_TYPE
                    mobileNo:
                        fieldName: mobileNo
                        isMain: true
                        type: STRING
                        value: $mobileNo
                    nationality:
                        fieldName: nationality
                        isMain: true
                        type: CODE_TYPE
                    nativePlace:
                        fieldName: nativePlace
                        isMain: true
                        type: STRING
                    nickName:
                        fieldName: nickName
                        isMain: true
                        type: STRING
                    nowWorkingYears:
                        fieldName: nowWorkingYears
                        isMain: true
                        type: CALCULATE
                    politicalStatus:
                        fieldName: politicalStatus
                        isMain: true
                        type: CODE_TYPE
                    positionId:
                        fieldName: positionId
                        isMain: true
                        type: STRING
                    positionLevelId:
                        fieldName: positionLevelId
                        isMain: true
                        type: STRING
                    probationEndDate:
                        fieldName: probationEndDate
                        isMain: true
                        type: DATE
                        value: $probationEndDate
                    probationLength:
                        fieldName: probationLength
                        isMain: true
                        type: INTEGER
                        value: null
                    qqNo:
                        fieldName: qqNo
                        isMain: true
                        type: STRING
                    sex:
                        fieldName: sex
                        isMain: true
                        type: CODE_TYPE
                    spouseName:
                        fieldName: spouseName
                        isMain: true
                        type: STRING
                    staffImageId:
                        fieldName: staffImageId
                        isMain: true
                        type: IMG
                        value: ''
                    staffName:
                        fieldName: staffName
                        isMain: true
                        type: STRING
                        value: $staffName
                    staffNo:
                        fieldName: staffNo
                        isMain: true
                        type: STRING
                    staffRemark:
                        fieldName: staffRemark
                        isMain: true
                        type: LONG_STRING
                    staffStatus:
                        fieldName: staffStatus
                        isMain: true
                        type: STRING
                        value: IN_SERVICE
                    staffType:
                        fieldName: staffType
                        isMain: true
                        type: CODE_TYPE
                        value: FULLTIME
                    weChatNo:
                        fieldName: weChatNo
                        isMain: true
                        type: STRING
                    workEmail:
                        fieldName: workEmail
                        isMain: true
                        type: STRING
                    workPhone:
                        fieldName: workPhone
                        isMain: true
                        type: STRING
                    workPlace:
                        fieldName: workPlace
                        isMain: true
                        type: STRING
                id: $staffId
                idCardNo: $idCardNo
                idCardType: CHINA_PASSPORT
                initialWorkYears: ''
                isProbation: true
                isSyncRosterAccount: false
                isUseLunar: false
                leaveDate: ''
                mobileNo: $mobileNo
                positiveDate: null
                probationEndDate: $probationEndDate
                probationLength: null
                sequence: 67
                serialNumber: null
                staffImageId: ''
                staffName: $staffName
                staffStatus: IN_SERVICE
                staffType: FULLTIME
            method: PUT
            url: /web/gateway/roster/aggregate/staffRoster/updateStaffBaseInfo
        validate:
        -   check: status_code
            comparator: equals
            expected: 200
        -   check: $result
            comparator: equals
            expected: true
        -   check: $data
            comparator: equals
            expected: true
        variables:
        -   birthday: ${timestamp2data($birthday)}
        -   enrollInDate: ${timestamp2data($enrollInDate)}
        -   probationEndDate: ${timestamp2data($probationEndDate)}
-   test:
        extract:
        -   id: content.data.content.0.id
        name: "\u5355\u63A5\u53E3-\u3010\u8F6C\u6B63\u7BA1\u7406\u3011\u83B7\u53D6\
            \u5F85\u8F6C\u6B63\u5458\u5DE5\u5217\u8868"
        request:
            headers:
                Content-Type: application/json;charset=UTF-8
                X-XSRF-TOKEN: ${getHeadersToken($cookie_token)}
            json:
                page: 1
                queryParam:
                    enrollInDateGeOrEqStartMonth: ''
                    enrollInDateLtOrEqEndMonth: ''
                    likeDepartmentName: ''
                    likeMobileNo: ''
                    likePositionName: ''
                    likeStaffName: ''
                    likestaffNo: ''
                    positive: true
                    positiveDateGeOrEqStartMonth: ''
                    positiveDateLtOrEqEndMonth: ''
                    probationEndDateGeOrEqStartMonth: ''
                    probationEndDateLtOrEqEndMonth: ''
                rows: 10
                totalElements: 0
                totalPages: 0
            method: POST
            url: /web/gateway/roster/api/positive/pageData
        validate:
        -   check: status_code
            comparator: equals
            expected: 200
        variables:
        -   birthday: '2020-01-01'
        -   probationEndDate: ${cal_date(${get_current_date()})}
-   test:
        extract:
        -   departmentName: content.data.departmentName
        -   enrollInDate: content.data.enrollInDate
        -   id: content.data.id
        -   mobileNo: content.data.mobileNo
        -   positiveDate: content.data.positiveDate
        -   probationEndDate: content.data.probationEndDate
        -   staffId: content.data.staffId
        -   staffName: content.data.staffName
        -   staffNo: content.data.staffNo
        -   companyId: content.data.staffSalarySimpleEntity.companyId
        name: "\u5355\u63A5\u53E3-\u3010\u8F6C\u6B63\u7BA1\u7406\u3011\u5458\u5DE5\
            \u8F6C\u6B63\u6821\u9A8C"
        request:
            headers:
                Content-Type: application/json;charset=UTF-8
                X-XSRF-TOKEN: ${getHeadersToken($cookie_token)}
            method: GET
            url: /web/gateway/roster/api/positive/positiveConfirm?positiveId=$id
        validate:
        -   check: status_code
            comparator: equals
            expected: 200
        variables:
        -   positiveApplyDate: ${getCurrentDate()}
        -   effectiveAt: ${getCurrentDate()}
-   test:
        extract:
        -   result: content.result
        name: "\u5355\u63A5\u53E3-\u3010\u8F6C\u6B63\u7BA1\u7406\u3011\u786E\u8BA4\
            \u5458\u5DE5\u8F6C\u6B63"
        request:
            headers:
                Content-Type: application/json;charset=UTF-8
                X-XSRF-TOKEN: ${getHeadersToken($cookie_token)}
            json:
                departmentName: $departmentName
                enrollInDate: $enrollInDate
                entryApplicationStatus: ABANDON
                fileIdList: []
                id: $id
                imageIdList: []
                imgId: ''
                mobileNo: $mobileNo
                positionName: null
                positiveApplyDate: $positiveApplyDate
                positiveDate: $positiveDate
                positiveEvaluationResultsType: NORMAL_POSITIVE
                positiveStatus: STAY_CONFIRM
                positiveWarn: null
                probationEndDate: $probationEndDate
                probationReview: "\u8F6C\u6B63"
                remark: null
                salaryProfileChangeType: PROBATION_REVIEW
                sendEmail: false
                sendSms: false
                staffId: $staffId
                staffName: $staffName
                staffNo: null
                staffSalarySimpleEntity:
                    companyId: $companyId
                    companySalaryProfileEntity:
                        createdAt: null
                        id: null
                        profileFields:
                        -   code: basesalary
                            companyReferenceFormula: null
                            createdAt: null
                            effectiveAt: null
                            formula: null
                            id: null
                            indexno: 1
                            invalidAt: null
                            name: "\u57FA\u672C\u5DE5\u8D44"
                            type: null
                            updatedAt: null
                        updatedAt: null
                    staffId: $staffId
                    staffSalary:
                        changeType:
                            id: PROBATION_REVIEW
                            title: "\u8F6C\u6B63"
                        effectiveAt: $effectiveAt
                        wrapper:
                            items:
                                basesalary:
                                    v: '2000'
                userId: null
            method: POST
            url: /web/gateway/roster/aggregate/positive/archive
        validate:
        -   check: status_code
            comparator: equals
            expected: 200
        -   check: $result
            comparator: equals
            expected: true
        variables:
        -   birthday: '2020-01-01'
        -   positiveApplyDate: ${cal_date(${get_current_date()})}
        -   effectiveAt: ${cal_date(${get_current_date()})}
-   test:
        extract:
        -   staffId: content.pageDate.content.0.staff.id
        name: "\u5355\u63A5\u53E3-\u3010\u85AA\u8D44\u6863\u6848\u3011\u6839\u636E\
            \u59D3\u540D\u67E5\u8BE2\u5458\u5DE5\u7684\u85AA\u8D44\u6863\u6848\u8BB0\
            \u5F55"
        request:
            headers:
                Content-Type: application/json;charset=UTF-8
                X-XSRF-TOKEN: ${getHeadersToken($cookie_token)}
            json:
                enrollInDate: null
                enrollInDateEnd: null
                enrollInDateStart: null
                noPage: false
                page: 0
                projection: staffPayrollInfoProjection
                size: 10
                specification:
                    predications:
                    -   fieldName: staffName
                        fieldValue: $staffName
                        operator: START_WITH
                        searchMode: AND
            method: POST
            url: /gateway/cnb/aggregate/payrollInfo/list/currentEffective
        setup_hooks: []
        teardown_hooks:
        - ${sleep_N_secs(3)}
        validate:
        -   check: status_code
            comparator: equals
            expected: 200
-   test:
        extract:
        -   code: content.code
        name: "\u5355\u63A5\u53E3-\u3010\u85AA\u8D44\u6863\u6848\u3011\u6838\u5B9E\
            \u8F6C\u6B63\u5458\u5DE5\u7684\u85AA\u8D44\u6570\u636E"
        request:
            headers:
                Content-Type: application/json;charset=UTF-8
                X-XSRF-TOKEN: ${getHeadersToken($cookie_token)}
            method: GET
            url: /gateway/payroll/api/staffPayrollInfoes/list/$staffId?tableCode=payroll.table.staffPayrollInfo
        validate:
        -   check: status_code
            comparator: equals
            expected: 200
        -   check: $code
            comparator: equals
            expected: 0
